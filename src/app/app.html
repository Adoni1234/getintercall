<mat-card class="main-card">
  <mat-card-header>
    <mat-card-title>GetIntercall - TranscripciÃ³n Real-Time</mat-card-title>
    <mat-card-subtitle>DetecciÃ³n automÃ¡tica de inglÃ©s y espaÃ±ol</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <button mat-raised-button color="primary" (click)="startRecording()" [disabled]="isRecording">
      ğŸ™ï¸ Iniciar TranscripciÃ³n
    </button>
    <button mat-raised-button color="warn" (click)="stopRecording()" [disabled]="!isRecording">
      ğŸ›‘ Detener
    </button>

    <mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="50"></mat-progress-spinner>

    <div class="transcription-container" #scrollMe (scroll)="onContainerScroll($event)">
      <!-- Definitive blocks -->
      <div *ngFor="let bloque of bloques; let i = index" 
           class="bloque definitivo" 
           [attr.data-lang]="bloque.lang">
        <p class="lang" [attr.data-lang]="bloque.lang">
          {{ bloque.lang === 'es' ? 'ğŸ‡ªğŸ‡¸ EspaÃ±ol' : 'ğŸ‡ºğŸ‡¸ English' }}
        </p>
        <p class="text">{{ bloque.text }}</p>
        <small class="timestamp">Bloque {{ i + 1 }}</small>
      </div>
      
      <!-- Current partial block -->
      <div *ngIf="currentPartial.text.trim()" 
           class="bloque temporal" 
           [attr.data-lang]="currentPartial.lang"
           [ngClass]="{ 'no-pulse': !autoScrollEnabled }">
        <p class="lang" [attr.data-lang]="currentPartial.lang">
          {{ currentPartial.lang === 'es' ? 'ğŸ‡ªğŸ‡¸ EspaÃ±ol' : 'ğŸ‡ºğŸ‡¸ English' }} - Escuchando...
        </p>
        <p class="text">{{ currentPartial.text }}</p>
        <small class="status">â— En vivo</small>
      </div>
      
      <!-- Empty states -->
      <div *ngIf="loading && bloques.length === 0" class="loading">
        ğŸ§ Escuchando audio de pestaÃ±a...
      </div>
      <div *ngIf="!isRecording && bloques.length === 0" class="empty">
        Presiona "Iniciar TranscripciÃ³n" para comenzar
      </div>
    </div>
  </mat-card-content>
</mat-card>